# Core AI libraries
pip install openai ollama langchain chromadb

# Utilities
pip install pandas python-dotenv

python setup_database.py

python run_smart_collect.py

curl -fsSL https://ollama.com/install.sh | sh




--- ğŸ’¬ STARTING LIVE CHAT ---

ğŸ‘¤ USER: Stop calling me! I don't have the money right now.

ğŸ¤– AI (ollama): John, I understand it can be stressful to think about paying off a large amount. Let's work together to find a solution. Would you like to discuss setting up a payment plan that fits your current situation?

ğŸ‘¤ USER: I actually lost my job last week, I can't pay anything.

ğŸ¤– AI (ollama): So sorry to hear that, John. Job loss can be really tough. Let's prioritize getting you back on track. Would you like to consider our "Hardship Pause" option? It can give us some flexibility and help you get settled before we revisit your payment plan. What do you think?


--- âš–ï¸ METRICS VALIDATION ---
âœ… Compliance Status: PASSED
ğŸ“Š Empathy Score: 2/2 turns

--- ğŸ•µï¸ STARTING KYC-X EXTRACTION MODULE ğŸ•µï¸ ---

ğŸ“„ INPUT: Received raw OCR text (174 chars)...

--- ğŸ¤– AI OUTPUT (Raw) ---
Here is the extracted data in valid JSON format:

{
"full_name": "SARAH J. CONNOR",
"date_of_birth": "12-05-1994",
"document_type": "Passport",
"id_number": "P4SSPORT# 881209X",
"expiry_date": "14-08-2024",
"risk_flags": []
}

Note: Since the document's expiry date is before today's date (2025-12-02), no risk flags are added.

--- âš–ï¸ VALIDATION REPORT ---
â±ï¸  Processing Time: 136.67 seconds (Benchmark: <30s)
âŒ CRITICAL FAIL: Model did not output valid JSON.


--- ğŸ•µï¸ STARTING ROBUST KYC EXTRACTION ğŸ•µï¸ ---

ğŸ“„ INPUT: Received raw OCR text (108 chars)...

--- âœ… VALIDATED OUTPUT ---
{
  "full_name": "SARAH J. CONNOR",
  "dob_iso": "1984-05-12",
  "id_number": "881209X",
  "expiry_date_iso": "2024-08-14",
  "document_type": "PASSPORT",
  "risk_flags": [
    "DOCUMENT_EXPIRED (Expired on 2024-08-14)",
    "POTENTIAL_OCR_ERROR_IN_ID"
  ]
}

--- âš–ï¸ REPORT CARD ---
â±ï¸ Time: 103.01s
ğŸš© RISKS DETECTED: ['DOCUMENT_EXPIRED (Expired on 2024-08-14)', 'POTENTIAL_OCR_ERROR_IN_ID']


import chromadb
from chromadb.utils import embedding_functions

# --- 1. SETUP THE DATABASE ---
# We use a local persistent storage (a folder named 'bank_memory')
client = chromadb.PersistentClient(path="./bank_memory")

# Use a free, high-quality embedding model (MiniLM)
# This turns text into a list of numbers (vectors)
embed_fn = embedding_functions.SentenceTransformerEmbeddingFunction(model_name="all-MiniLM-L6-v2")

# Create (or get) the collection
collection = client.get_or_create_collection(name="policy_docs", embedding_function=embed_fn)

# --- 2. THE DATA (Simulated Policy Document) ---
# In a real app, you would read this from a PDF.
documents = [
    "POLICY-101: Unsecured Personal Loans. Max limit is $50,000. Min credit score 680. Interest rate 12%.",
    "POLICY-102: Small Business Loans. Requires 2 years of tax returns. Max limit $500,000. Excludes crypto businesses.",
    "POLICY-103: KYC Updates 2025. All passports must be valid for at least 6 months beyond application date.",
    "POLICY-104: Remote Work Security. Employees must use VPN 'NexusSecure'. Personal devices are strictly prohibited."
]

ids = ["doc1", "doc2", "doc3", "doc4"]
metadatas = [{"source": "Lending_Manual"}, {"source": "Lending_Manual"}, {"source": "Compliance_Guide"}, {"source": "HR_Handbook"}]

# --- 3. STORE IT ---
print("--- ğŸ“š INGESTING DOCUMENTS INTO VECTOR DB ---")
collection.upsert(documents=documents, ids=ids, metadatas=metadatas)
print(f"âœ… Successfully stored {len(documents)} policy chunks in 'bank_memory'.")


--- ğŸ›ï¸ STARTING REGPULSE (RAG ENGINE) ğŸ›ï¸ ---

â“ QUESTION: What is the maximum limit for a personal loan?
ğŸ“– FOUND EVIDENCE (from Lending_Manual): 'POLICY-101: Unsecured Personal Loans. Max limit is $50,000. Min credit score 680. Interest rate 12%.'
ğŸ¤– AI ANSWER: The maximum limit for an unsecured personal loan under Policy-101 is $50,000.
âœ… CITATION: Verified against Lending_Manual
----------------------------------------

â“ QUESTION: Can a crypto startup get a business loan?
ğŸ“– FOUND EVIDENCE (from Lending_Manual): 'POLICY-102: Small Business Loans. Requires 2 years of tax returns. Max limit $500,000. Excludes crypto businesses.'
ğŸ¤– AI ANSWER: I cannot find a specific policy for granting small business loans to cryptocurrency startups. According to Policy-102 regarding Small Business Loans, the requirement includes submitting two years of tax returns and there is no mention about excluding crypto businesses from eligibility criteria. However, as my information doesn't explicitly state that policy allows or disallows loans for such enterprises, I would recommend directly contacting lending institutions to get precise guidance based on their internal policies beyond just Policy-102.
âœ… CITATION: Verified against Lending_Manual
----------------------------------------

â“ QUESTION: Can I use my personal iPad for work?
ğŸ“– FOUND EVIDENCE (from HR_Handbook): 'POLICY-104: Remote Work Security. Employees must use VPN 'NexusSecure'. Personal devices are strictly prohibited.'
ğŸ¤– AI ANSWER: I cannot find a policy for that within Policy-104: Remote Work Security. According to this rule, employees must use VPN 'NexusSecure' and are strictly prohibited from using their own devices as it is implied they might not comply with the security standards set by NexusSecure.
âœ… CITATION: Verified against HR_Handbook
----------------------------------------